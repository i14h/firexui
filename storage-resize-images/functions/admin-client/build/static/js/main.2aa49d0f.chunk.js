(this["webpackJsonpadmin-client"]=this["webpackJsonpadmin-client"]||[]).push([[0],{224:function(e,t,s){"use strict";s.r(t);var a=s(2),c=s.n(a),n=s(82),r=s.n(n),l=(s(91),s(92),s(7)),i=s.n(l),o=s(11),d=s(15),m=s.p+"static/media/logo.6ce24c58.svg",b=(s(94),s(22)),j=s.n(b),x=s(9),h=s(23),u=s(83),p=s.n(u),f=(s(225),s(116),s(1));var g=function(){var e=x.a.auth();return Object(f.jsx)(p.a,{onClick:function(){var t=new x.a.auth.GoogleAuthProvider;e.signInWithPopup(t).then(function(){var e=Object(d.a)(i.a.mark((function e(t){var s,a,c,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.user){e.next=2;break}return e.abrupt("return");case 2:return s=t.user,e.next=5,s.getIdTokenResult();case 5:a=e.sent,c=a.token,n=a.issuedAtTime,r=a.expirationTime,console.log("token:"),console.log(c),console.log("issuedAt:"),console.log(n),console.log("expirationTime:"),console.log(r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})};var O=function(){var e=x.a.auth();return null==e.currentUser?null:Object(f.jsx)("button",{className:"bg-yellow-500 hover:bg-yellow-600 text-white font-bold px-4 rounded-lg h-12 place-self-center mr-5",onClick:function(){return e.signOut()},children:"Sign Out"})};var y=function(e){var t=x.a.auth(),s=Object(h.a)(t),c=Object(o.a)(s,1)[0],n=Object(a.useRef)(null),r=Object(a.useRef)(null),l=Object(a.useState)(!1),m=Object(o.a)(l,2),b=m[0],u=m[1],p=e.onSettingsChange,g=function(){var e=Object(d.a)(i.a.mark((function e(t){var s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),u(!0),e.next=4,c.getIdTokenResult();case 4:return s=e.sent,a=s.token,e.prev=6,e.next=9,j.a.post("admin/write-config",{width:n.current.value,height:r.current.value},{headers:{Authorization:"Bearer ".concat(a)}});case 9:200===e.sent.status?p(!0):p(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0.message),p(!1);case 17:return u(!1),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"card mt-2",children:Object(f.jsxs)("form",{className:"card-body",autoComplete:"off",onSubmit:g,children:[Object(f.jsxs)("div",{className:"form-row",children:[Object(f.jsxs)("div",{className:"form-group col-md-6 text-left",children:[Object(f.jsx)("label",{for:"resized-width",className:"text-secondary col-form-label-sm",children:"Width After Resize"}),Object(f.jsx)("input",{type:"text",className:"form-control",id:"resized-width",placeholder:"Width (Pixels)",ref:n,autoComplete:"off"})]}),Object(f.jsxs)("div",{className:"form-group col-md-6 text-left",children:[Object(f.jsx)("label",{for:"resized-height",className:"text-secondary col-form-label-sm",children:"Height After Resize"}),Object(f.jsx)("input",{type:"text",className:"form-control",id:"resized-height",placeholder:"Height (Pixels)",ref:r,autoComplete:"off"})]})]}),Object(f.jsxs)("div",{className:"form-row my-2",children:[Object(f.jsx)("label",{className:"text-secondary col-form-label-sm",children:"Delete Original Files ?"}),Object(f.jsxs)("select",{class:"form-control",id:"action-on-resize",children:[Object(f.jsx)("option",{children:"Delete on successful resize"}),Object(f.jsx)("option",{children:"Yes"}),Object(f.jsx)("option",{children:"No"})]})]}),Object(f.jsxs)("div",{className:"form-row my-2",children:[Object(f.jsx)("label",{className:"text-secondary col-form-label-sm",children:"Cloud Storage Path Of Original Files"}),Object(f.jsx)("input",{type:"text",id:"disabledTextInput",className:"form-control w-full",placeholder:"e.g. /images"})]}),Object(f.jsxs)("div",{className:"form-row my-2",children:[Object(f.jsx)("label",{className:"text-secondary col-form-label-sm",children:"Cloud Storage Paths To Exclude"}),Object(f.jsx)("input",{type:"text",id:"disabledTextInput",className:"form-control",placeholder:"e.g. /images/high-res"})]}),Object(f.jsxs)("div",{className:"form-row my-2",children:[Object(f.jsx)("label",{className:"text-secondary col-form-label-sm",children:"Cloud Storage Path For Resized Images"}),Object(f.jsx)("input",{type:"text",id:"disabledTextInput",className:"form-control",placeholder:"e.g. thumbnails"})]}),Object(f.jsxs)("div",{className:"form-row my-2",children:[Object(f.jsx)("label",{className:"text-secondary col-form-label-sm",children:"Cache-Control Header"}),Object(f.jsx)("input",{type:"text",id:"disabledTextInput",className:"form-control",placeholder:"e.g. max-age=86400"})]}),Object(f.jsxs)("div",{className:"form-row my-2",children:[Object(f.jsx)("label",{className:"text-secondary col-form-label-sm",children:"Resized Image File Name Pattern:"}),Object(f.jsx)("input",{type:"text",id:"disabledTextInput",className:"form-control",placeholder:"e.g. ${original_name}_${width}x${heigth}"})]}),Object(f.jsxs)("div",{className:"form-row my-2",children:[Object(f.jsx)("label",{className:"text-secondary col-form-label-sm pt-3 mr-2",children:"Result Formats:"}),Object(f.jsxs)("div",{class:"form-check form-check-inline",children:[Object(f.jsx)("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox1",value:"option1"}),Object(f.jsx)("label",{class:"text-secondary col-form-label-sm form-check-label",for:"inlineCheckbox1",children:"original"})]}),Object(f.jsxs)("div",{class:"form-check form-check-inline",children:[Object(f.jsx)("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox2",value:"option2"}),Object(f.jsx)("label",{class:"text-secondary col-form-label-sm form-check-label",for:"inlineCheckbox2",children:"jepg"})]}),Object(f.jsxs)("div",{class:"form-check form-check-inline",children:[Object(f.jsx)("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox3",value:"option3"}),Object(f.jsx)("label",{class:"text-secondary col-form-label-sm form-check-label",for:"inlineCheckbox3",children:"png"})]}),Object(f.jsxs)("div",{class:"form-check form-check-inline",children:[Object(f.jsx)("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox3",value:"option3"}),Object(f.jsx)("label",{class:"text-secondary col-form-label-sm form-check-label",for:"inlineCheckbox3",children:"tiff"})]}),Object(f.jsxs)("div",{class:"form-check form-check-inline",children:[Object(f.jsx)("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox3",value:"option3"}),Object(f.jsx)("label",{class:"text-secondary col-form-label-sm form-check-label",for:"inlineCheckbox3",children:"webp"})]})]}),b?Object(f.jsxs)("button",{class:"btn btn-primary",type:"button",disabled:!0,children:[Object(f.jsx)("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(f.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update"})]})})};var v=function(){return{width:200,height:200}},N=s(86);var k=function(){return Object(f.jsxs)("div",{className:"flex mx-60 my-2 px-4 py-2 bg-white shadow-md sm:rounded-md",children:[Object(f.jsxs)("div",{className:"w-2/3",children:[Object(f.jsx)("p",{className:"mb-2 text-xl text-gray-500",children:"Storage Savings"}),Object(f.jsx)("div",{className:"h-80 w-full",children:Object(f.jsx)(N.a,{data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Original Size (Cumulative) (GB)",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.5)",lineTension:.2,data:[100,110,130,160,200,250,350,500,750,1e3,1250,1800]},{label:"Resized Images (Cumulative) (GB)",backgroundColor:"rgb(54, 162, 235)",borderColor:"rgba(54, 162, 235, 0.5)",lineTension:.2,data:[30,35,40,50,70,90,120,166,250,333,416,666]}]},options:{maintainAspectRatio:!1,title:{display:!0,text:"Average Rainfall per month",fontSize:20},legend:{display:!0,position:"right"}}})}),Object(f.jsx)("p",{className:"mt-4 text-justify text-gray-400 text-xs italic",children:"* Based on mock data (Real data can be read from Firestore / Firebase Storage)"})]}),Object(f.jsxs)("div",{className:"w-1/3 pt-12",children:[Object(f.jsx)("p",{className:"text-6xl text-yellow-500 font-semibold tracking-wider",children:"240,323"}),Object(f.jsx)("p",{className:"pt-3 text-3xl text-gray-400 tracking-wider select-none",children:"Images Processed"}),Object(f.jsx)("p",{className:"text-6xl text-green-400 font-semibold pt-20 tracking-wider",children:"1,134"}),Object(f.jsx)("p",{className:"pt-3 text-3xl text-gray-400 tracking-wider select-none",children:"Storage Saved (GB)"})]})]})};var w=function(){var e=x.a.auth(),t=Object(h.a)(e),s=Object(o.a)(t,1)[0],c=Object(a.useState)(null),n=Object(o.a)(c,2),r=n[0],l=n[1],m=function(){var e=Object(d.a)(i.a.mark((function e(){var t,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getIdTokenResult();case 2:return t=e.sent,a=t.token,e.prev=4,e.next=7,j.a.get("admin/read-config",{headers:{Authorization:"Bearer ".concat(a)}});case 7:return c=e.sent,console.log(c.status),console.log(c.data),200===c.status?l(c.data):l(v()),e.abrupt("return");case 14:return e.prev=14,e.t0=e.catch(4),console.log(e.t0.message),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?l(null):alert("Update was not successful. Please try again later.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r||m(),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("header",{className:"w-full top-0 bg-blue-400 h-20 flex place-content-between shadow-md",children:[Object(f.jsxs)("div",{className:"flex pl-5 justify-center place-self-center",children:[Object(f.jsx)("img",{className:"h-14 inline",src:"https://www.gstatic.com/mobilesdk/200707_mobilesdk/resize_images_52@2x.png",alt:"logo"}),Object(f.jsx)("h1",{className:"inline text-gray-100 align-text-bottom text-4xl pl-3 self-center",children:"Image Resizer Extension Dashboard"})]}),Object(f.jsx)(O,{})]}),Object(f.jsx)(k,{}),Object(f.jsxs)("div",{className:"flex mx-60 my-2 px-4 py-2 bg-white shadow-md sm:rounded-md",children:[Object(f.jsxs)("div",{className:"w-1/2",children:[Object(f.jsx)("div",{className:"my-3 text-xl text-gray-500 text-left",children:"Current Settings"}),r?Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{className:"text-left text-gray-600 my-2",children:["Resized Dimensions (Width x Height):",Object(f.jsxs)("span",{className:"font-mono ml-2",children:[r.width," x ",r.height]})]}),Object(f.jsxs)("p",{className:"text-left text-gray-600 my-2",children:["Delete Original Files:",Object(f.jsx)("span",{className:"font-mono ml-2",children:"Delete on successful resize"})]}),Object(f.jsxs)("p",{className:"text-left text-gray-600 my-2",children:["Cloud Storage Path For Resized Images:",Object(f.jsx)("span",{className:"font-mono ml-2",children:"/thumbnails"})]}),Object(f.jsxs)("p",{className:"text-left text-gray-600 my-2",children:["Path of Original Images:",Object(f.jsx)("span",{className:"font-mono ml-2",children:"/images"})]}),Object(f.jsxs)("p",{className:"text-left text-gray-600 my-2",children:["Exclude Paths:",Object(f.jsx)("span",{className:"font-mono ml-2",children:"None"})]}),Object(f.jsxs)("p",{className:"text-left text-gray-600 my-2",children:["Cache-Control Header:",Object(f.jsx)("span",{className:"font-mono ml-2",children:"max-age=86400"})]}),Object(f.jsxs)("p",{className:"text-left text-gray-600 my-2",children:["Resized File Names:",Object(f.jsx)("span",{className:"font-mono ml-2",children:"${original_name}_${width}x${heigth}"})]}),Object(f.jsxs)("p",{className:"text-left text-gray-600 my-2",children:["Convert to following types:",Object(f.jsx)("span",{className:"font-mono ml-2",children:"jpeg, png"})]})]}):Object(f.jsx)("div",{class:"spinner-border text-warning",role:"status",children:Object(f.jsx)("span",{class:"sr-only",children:"Loading..."})})]}),Object(f.jsxs)("div",{className:"w-1/2 my-3 text-xl text-gray-500 text-left",children:[Object(f.jsx)("p",{children:"Modify Settings"}),Object(f.jsx)(y,{onSettingsChange:b})]})]})]})},C=0,z=1,S=2;function A(){return(A=Object(d.a)(i.a.mark((function e(t){var s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getIdTokenResult();case 2:return s=e.sent,a=s.token,e.prev=4,e.next=7,j.a.get("admin/work",{headers:{Authorization:"Bearer ".concat(a)}});case 7:if(200!==e.sent.status){e.next=10;break}return e.abrupt("return",!0);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),console.log(e.t0.message),e.abrupt("return",!1);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}var I=function(){var e=Object(a.useState)(C),t=Object(o.a)(e,2),s=t[0],c=t[1];if(!x.a.apps.length){var n=document.getElementById("firebase-app"),r=n.getAttribute("api-key"),l=n.getAttribute("project-id");x.a.initializeApp({apiKey:r,authDomain:l+".firebaseapp.com",projectId:l})}var i=x.a.auth(),d=Object(h.a)(i),b=Object(o.a)(d,1)[0];return b&&function(e){return A.apply(this,arguments)}(b).then((function(e){e?c(S):(c(z),i.signOut())})),b&&s===S?Object(f.jsx)(w,{}):s===z?Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)("img",{src:m,className:"App-logo",alt:"logo"}),Object(f.jsx)("p",{children:"You are not authorized to access this content."}),Object(f.jsx)("div",{className:"mt-3",children:Object(f.jsx)(g,{})})]})}):Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)("img",{src:m,className:"App-logo",alt:"logo"}),Object(f.jsx)("p",{children:"Welcome to the Image Resizer Extension Dashboard!"}),Object(f.jsx)("p",{children:"Please sign in to continue"}),Object(f.jsx)("div",{className:"mt-3",children:Object(f.jsx)(g,{})})]})})},R=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,226)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(I,{})}),document.getElementById("root")),R()},91:function(e,t,s){},92:function(e,t,s){},94:function(e,t,s){}},[[224,1,2]]]);
//# sourceMappingURL=main.2aa49d0f.chunk.js.map