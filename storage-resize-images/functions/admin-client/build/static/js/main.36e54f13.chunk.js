(this["webpackJsonpadmin-client"]=this["webpackJsonpadmin-client"]||[]).push([[0],{35:function(e,t,n){},37:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),s=n(29),c=n.n(s),i=(n(35),n(7)),o=n.n(i),u=n(12),l=n(11),d=n.p+"static/media/logo.6ce24c58.svg",p=(n(37),n(14)),h=n.n(p),j=n(9),b=n(15),m=n(30),f=n.n(m),x=(n(63),n(59),n(1));var g=function(){var e=j.a.auth();return Object(x.jsx)(f.a,{onClick:function(){var t=new j.a.auth.GoogleAuthProvider;e.signInWithPopup(t).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.user){e.next=2;break}return e.abrupt("return");case 2:return n=t.user,e.next=5,n.getIdTokenResult();case 5:r=e.sent,a=r.token,s=r.issuedAtTime,c=r.expirationTime,console.log("token:"),console.log(a),console.log("issuedAt:"),console.log(s),console.log("expirationTime:"),console.log(c);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})};var O=function(){var e=j.a.auth();return null==e.currentUser?null:Object(x.jsx)("button",{className:"btn btn-warning",onClick:function(){return e.signOut()},children:"Sign Out"})};var v=function(e){var t=j.a.auth(),n=Object(b.a)(t),a=Object(u.a)(n,1)[0],s=Object(r.useRef)(null),c=Object(r.useRef)(null),i=Object(r.useState)(!1),d=Object(u.a)(i,2),p=d[0],m=d[1],f=e.onSettingsChange,g=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),m(!0),e.next=4,a.getIdTokenResult();case 4:return n=e.sent,r=n.token,e.prev=6,e.next=9,h.a.post("admin/write-config",{width:s.current.value,height:c.current.value},{headers:{Authorization:"Bearer ".concat(r)}});case 9:200===e.sent.status?f(!0):f(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0.message),f(!1);case 17:return m(!1),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"card mt-2",style:{width:"30rem"},children:Object(x.jsxs)("form",{className:"card-body",autoComplete:"off",onSubmit:g,children:[Object(x.jsxs)("div",{className:"form-row",children:[Object(x.jsxs)("div",{className:"form-group col-md-6 text-left",children:[Object(x.jsx)("label",{for:"resized-width",className:"text-secondary col-form-label-sm",children:"Width After Resize"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"resized-width",placeholder:"Width (Pixels)",ref:s,autoComplete:"off"})]}),Object(x.jsxs)("div",{className:"form-group col-md-6 text-left",children:[Object(x.jsx)("label",{for:"resized-height",className:"text-secondary col-form-label-sm",children:"Height After Resize"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"resized-height",placeholder:"Height (Pixels)",ref:c,autoComplete:"off"})]})]}),p?Object(x.jsxs)("button",{class:"btn btn-primary",type:"button",disabled:!0,children:[Object(x.jsx)("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})};var w=function(){return{width:200,height:200}};var k=function(){var e=j.a.auth(),t=Object(b.a)(e),n=Object(u.a)(t,1)[0],a=Object(r.useState)(null),s=Object(u.a)(a,2),c=s[0],i=s[1],d=function(){var e=Object(l.a)(o.a.mark((function e(){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getIdTokenResult();case 2:return t=e.sent,r=t.token,e.prev=4,e.next=7,h.a.get("admin/read-config",{headers:{Authorization:"Bearer ".concat(r)}});case 7:return a=e.sent,console.log(a.status),console.log(a.data),200===a.status?i(a.data):i(w()),e.abrupt("return");case 14:return e.prev=14,e.t0=e.catch(4),console.log(e.t0.message),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?i(null):alert("Update was not successful. Please try again later.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c||d(),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("header",{className:"App-header",children:[Object(x.jsxs)("p",{children:["Hi, ",n.displayName]}),Object(x.jsx)("p",{children:"This is the Admin WebApp. You have superpowers!\ud83d\udd25 \ud83d\ude80"}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)(O,{})}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Current Extension Settings:"}),c?Object(x.jsxs)("div",{children:["Width = ",c.width,", Height = ",c.height]}):Object(x.jsx)("div",{class:"spinner-border text-warning",role:"status",children:Object(x.jsx)("span",{class:"sr-only",children:"Loading..."})})]}),Object(x.jsx)(v,{onSettingsChange:p})]})})},N=0,y=1,A=2;function z(){return(z=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getIdTokenResult();case 2:return n=e.sent,r=n.token,e.prev=4,e.next=7,h.a.get("admin/work",{headers:{Authorization:"Bearer ".concat(r)}});case 7:if(200!==e.sent.status){e.next=10;break}return e.abrupt("return",!0);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),console.log(e.t0.message),e.abrupt("return",!1);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}var C=function(){var e=Object(r.useState)(N),t=Object(u.a)(e,2),n=t[0],a=t[1];if(!j.a.apps.length){var s=document.getElementById("firebase-app"),c=s.getAttribute("api-key"),i=s.getAttribute("project-id");j.a.initializeApp({apiKey:c,authDomain:i+".firebaseapp.com",projectId:i})}var o=j.a.auth(),l=Object(b.a)(o),p=Object(u.a)(l,1)[0];return p&&function(e){return z.apply(this,arguments)}(p).then((function(e){e?a(A):(a(y),o.signOut())})),p&&n===A?Object(x.jsx)(k,{}):n===y?Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("header",{className:"App-header",children:[Object(x.jsx)("img",{src:d,className:"App-logo",alt:"logo"}),Object(x.jsx)("p",{children:"You are not authorized to access this content."}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)(g,{})})]})}):Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("header",{className:"App-header",children:[Object(x.jsx)("img",{src:d,className:"App-logo",alt:"logo"}),Object(x.jsx)("p",{children:"Welcome to the Admin Portal!"}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)(g,{})})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(C,{})}),document.getElementById("root")),S()}},[[62,1,2]]]);
//# sourceMappingURL=main.36e54f13.chunk.js.map