{"version":3,"sources":["logo.svg","components/SignIn.jsx","components/SignOutButton.jsx","components/ConfigForm.jsx","components/ExtensionSettings.js","components/AdminApp.jsx","App.js","reportWebVitals.js","index.js"],"names":["SignIn","auth","firebase","onClick","provider","GoogleAuthProvider","signInWithPopup","then","a","credentials","user","getIdTokenResult","idTokenResult","token","issuedAtTime","expirationTime","console","log","SignOutButton","currentUser","className","signOut","ConfigForm","props","useAuthState","resizedWidthRef","useRef","resizedHeightRef","useState","submitInProgress","setSubmitInProgress","onSettingsChange","onFormSubmit","event","preventDefault","axios","post","width","current","value","height","headers","Authorization","status","message","style","autoComplete","onSubmit","for","type","id","placeholder","ref","class","disabled","role","aria-hidden","ExtensionSettings","AdminApp","settings","setSettings","getCurrentConfigs","get","result","data","success","alert","displayName","UserStatus","App","userStatus","setUserStatus","apps","length","elem","document","getElementById","apiKey","getAttribute","projectId","initializeApp","authDomain","isUserAnAdmin","admin","src","logo","alt","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.36e54f13.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from \"react\";\nimport firebase from \"firebase/app\";\nimport GoogleButton from \"react-google-button\";\nimport \"firebase/firestore\";\nimport \"firebase/auth\";\n\nfunction SignIn() {\n  const auth = firebase.auth();\n  const signInWithGoogle = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider).then(async (credentials) => {\n      if (credentials.user == null) return;\n      let user = credentials.user;\n      let idTokenResult = await user.getIdTokenResult();\n      let token = idTokenResult.token;\n      let issuedAtTime = idTokenResult.issuedAtTime;\n      let expirationTime = idTokenResult.expirationTime;\n      console.log(\"token:\");\n      console.log(token);\n      console.log(\"issuedAt:\");\n      console.log(issuedAtTime);\n      console.log(\"expirationTime:\");\n      console.log(expirationTime);\n    });\n  };\n  return <GoogleButton onClick={signInWithGoogle} />;\n}\n\nexport default SignIn;\n","import React from \"react\";\nimport firebase from \"firebase/app\";\n\nfunction SignOutButton() {\n  const auth = firebase.auth();\n  return auth.currentUser == null ? null : (\n    <button className=\"btn btn-warning\" onClick={() => auth.signOut()}>\n      Sign Out\n    </button>\n  );\n}\n\nexport default SignOutButton;\n","import React, { useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport firebase from \"firebase/app\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\n\nfunction ConfigForm(props) {\n  const auth = firebase.auth();\n  const [user] = useAuthState(auth);\n  const resizedWidthRef = useRef(null);\n  const resizedHeightRef = useRef(null);\n  let [submitInProgress, setSubmitInProgress] = useState(false);\n  let onSettingsChange = props.onSettingsChange;\n\n  const onFormSubmit = async (event) => {\n    event && event.preventDefault();\n    setSubmitInProgress(true);\n    let idTokenResult = await user.getIdTokenResult();\n    let token = idTokenResult.token;\n    try {\n      const result = await axios.post(\n        \"admin/write-config\",\n        {\n          width: resizedWidthRef.current.value,\n          height: resizedHeightRef.current.value,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      if (result.status === 200) {\n        onSettingsChange(true);\n      } else {\n        onSettingsChange(false);\n      }\n    } catch (e) {\n      console.log(e.message);\n      onSettingsChange(false);\n    }\n    setSubmitInProgress(false);\n    return;\n  };\n\n  return (\n    <div className=\"card mt-2\" style={{ width: \"30rem\" }}>\n      <form className=\"card-body\" autoComplete=\"off\" onSubmit={onFormSubmit}>\n        <div className=\"form-row\">\n          <div className=\"form-group col-md-6 text-left\">\n            <label\n              for=\"resized-width\"\n              className=\"text-secondary col-form-label-sm\"\n            >\n              Width After Resize\n            </label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"resized-width\"\n              placeholder=\"Width (Pixels)\"\n              ref={resizedWidthRef}\n              autoComplete=\"off\"\n            />\n          </div>\n          <div className=\"form-group col-md-6 text-left\">\n            <label\n              for=\"resized-height\"\n              className=\"text-secondary col-form-label-sm\"\n            >\n              Height After Resize\n            </label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"resized-height\"\n              placeholder=\"Height (Pixels)\"\n              ref={resizedHeightRef}\n              autoComplete=\"off\"\n            />\n          </div>\n        </div>\n\n        {submitInProgress ? (\n          <button class=\"btn btn-primary\" type=\"button\" disabled>\n            <span\n              className=\"spinner-border spinner-border-sm mr-2\"\n              role=\"status\"\n              aria-hidden=\"true\"\n            ></span>\n            Loading...\n          </button>\n        ) : (\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Submit\n          </button>\n        )}\n      </form>\n    </div>\n  );\n}\n\nexport default ConfigForm;\n","/// The settings for this extension.\nfunction ExtensionSettings() {\n  // Set the default values as needed.\n  return {\n    width: 200,\n    height: 200,\n  };\n}\n\nexport default ExtensionSettings;\n","import React, { useState } from \"react\";\nimport firebase from \"firebase/app\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport SignOutButton from \"./SignOutButton\";\nimport ConfigForm from \"./ConfigForm\";\nimport axios from \"axios\";\nimport ExtensionSettings from \"./ExtensionSettings\";\n\nfunction AdminApp() {\n  const auth = firebase.auth();\n  const [user] = useAuthState(auth);\n  const [settings, setSettings] = useState(null);\n\n  const getCurrentConfigs = async () => {\n    let idTokenResult = await user.getIdTokenResult();\n    let token = idTokenResult.token;\n    try {\n      const result = await axios.get(\"admin/read-config\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      console.log(result.status);\n      console.log(result.data);\n      if (result.status === 200) {\n        setSettings(result.data);\n      } else {\n        setSettings(ExtensionSettings());\n      }\n      return;\n    } catch (e) {\n      console.log(e.message);\n      return false;\n    }\n  };\n\n  const onSettingsChange = async (success) => {\n    if (success) {\n      setSettings(null);\n    } else {\n      alert(\"Update was not successful. Please try again later.\");\n    }\n  };\n\n  if (!settings) {\n    getCurrentConfigs();\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <p>Hi, {user.displayName}</p>\n        <p>This is the Admin WebApp. You have superpowers!🔥 🚀</p>\n        <div className=\"\">\n          <SignOutButton />\n        </div>\n        <div>\n          <p>Current Extension Settings:</p>\n          {settings ? (\n            <div>\n              Width = {settings.width}, Height = {settings.height}\n            </div>\n          ) : (\n            <div class=\"spinner-border text-warning\" role=\"status\">\n              <span class=\"sr-only\">Loading...</span>\n            </div>\n          )}\n        </div>\n        <ConfigForm onSettingsChange={onSettingsChange} />\n      </header>\n    </div>\n  );\n}\n\nexport default AdminApp;\n","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport firebase from \"firebase/app\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useState } from \"react\";\nimport SignIn from \"./components/SignIn\";\nimport AdminApp from \"./components/AdminApp\";\n\nvar UserStatus = {\n  kUnauthenticated: 0,\n  kAuthenticatedButNotAdmin: 1,\n  kAuthenticatedAdmin: 2,\n};\n\nasync function isUserAnAdmin(user) {\n  let idTokenResult = await user.getIdTokenResult();\n  let token = idTokenResult.token;\n  try {\n    const result = await axios.get(\"admin/work\", {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    if (result.status === 200) {\n      // The server has confirmed that this user is an Admin User.\n      return true;\n    }\n  } catch (e) {\n    console.log(e.message);\n    return false;\n  }\n  return false;\n}\n\nfunction App() {\n  const [userStatus, setUserStatus] = useState(UserStatus.kUnauthenticated);\n\n  if (!firebase.apps.length) {\n    var elem = document.getElementById(\"firebase-app\");\n    var apiKey = elem.getAttribute(\"api-key\");\n    var projectId = elem.getAttribute(\"project-id\");\n    firebase.initializeApp({\n      apiKey: apiKey,\n      authDomain: projectId + \".firebaseapp.com\",\n      projectId: projectId,\n    });\n  }\n\n  // Note: using `useAuthState` is only allowed after\n  // `firebase.initializeApp()` has been performed.\n  const auth = firebase.auth();\n  const [user] = useAuthState(auth);\n  if (user) {\n    isUserAnAdmin(user).then((admin) => {\n      if (admin) {\n        setUserStatus(UserStatus.kAuthenticatedAdmin);\n      } else {\n        setUserStatus(UserStatus.kAuthenticatedButNotAdmin);\n        auth.signOut();\n      }\n    });\n  }\n\n  if (user && userStatus === UserStatus.kAuthenticatedAdmin) {\n    // This is the homepage for authenticated administrators.\n    return <AdminApp />;\n  }\n\n  if (userStatus === UserStatus.kAuthenticatedButNotAdmin) {\n    // This is the homepage for those who are authenticated, but the server\n    // has determined that they are not administrators.\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>You are not authorized to access this content.</p>\n          <div className=\"\">\n            <SignIn />\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  // This is the homepage for those who are not not authenticated yet.\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>Welcome to the Admin Portal!</p>\n        <div className=\"\">\n          <SignIn />\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}