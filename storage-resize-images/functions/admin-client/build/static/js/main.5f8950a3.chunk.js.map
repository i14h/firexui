{"version":3,"sources":["logo.svg","components/SignIn.jsx","components/SignOutButton.jsx","components/ConfigForm.jsx","components/ExtensionSettings.js","components/Stats.jsx","components/AdminApp.jsx","App.js","reportWebVitals.js","index.js"],"names":["SignIn","auth","firebase","onClick","provider","GoogleAuthProvider","signInWithPopup","then","a","credentials","user","getIdTokenResult","idTokenResult","token","issuedAtTime","expirationTime","console","log","SignOutButton","currentUser","className","signOut","ConfigForm","props","useAuthState","resizedWidthRef","useRef","resizedHeightRef","useState","submitInProgress","setSubmitInProgress","onSettingsChange","onFormSubmit","event","preventDefault","axios","post","width","current","value","height","headers","Authorization","status","message","autoComplete","onSubmit","for","type","id","placeholder","ref","class","disabled","role","aria-hidden","ExtensionSettings","Stats","data","labels","datasets","label","backgroundColor","borderColor","lineTension","options","maintainAspectRatio","title","display","text","fontSize","legend","position","AdminApp","settings","setSettings","getCurrentConfigs","get","result","success","alert","src","alt","UserStatus","App","userStatus","setUserStatus","apps","length","elem","document","getElementById","apiKey","getAttribute","projectId","initializeApp","authDomain","isUserAnAdmin","admin","logo","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5f8950a3.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from \"react\";\nimport firebase from \"firebase/app\";\nimport GoogleButton from \"react-google-button\";\nimport \"firebase/firestore\";\nimport \"firebase/auth\";\n\nfunction SignIn() {\n  const auth = firebase.auth();\n  const signInWithGoogle = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider).then(async (credentials) => {\n      if (credentials.user == null) return;\n      let user = credentials.user;\n      let idTokenResult = await user.getIdTokenResult();\n      let token = idTokenResult.token;\n      let issuedAtTime = idTokenResult.issuedAtTime;\n      let expirationTime = idTokenResult.expirationTime;\n      console.log(\"token:\");\n      console.log(token);\n      console.log(\"issuedAt:\");\n      console.log(issuedAtTime);\n      console.log(\"expirationTime:\");\n      console.log(expirationTime);\n    });\n  };\n  return <GoogleButton onClick={signInWithGoogle} />;\n}\n\nexport default SignIn;\n","import React from \"react\";\nimport firebase from \"firebase/app\";\n\nfunction SignOutButton() {\n  const auth = firebase.auth();\n  if (auth.currentUser == null) return null;\n\n  return (\n    <button\n      className=\"bg-yellow-500 hover:bg-yellow-600 text-white font-bold px-4 rounded-lg h-12 place-self-center mr-5\"\n      onClick={() => auth.signOut()}\n    >\n      Sign Out\n    </button>\n  );\n}\n\nexport default SignOutButton;\n","import React, { useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport firebase from \"firebase/app\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\n\nfunction ConfigForm(props) {\n  const auth = firebase.auth();\n  const [user] = useAuthState(auth);\n  const resizedWidthRef = useRef(null);\n  const resizedHeightRef = useRef(null);\n  let [submitInProgress, setSubmitInProgress] = useState(false);\n  let onSettingsChange = props.onSettingsChange;\n\n  const onFormSubmit = async (event) => {\n    event && event.preventDefault();\n    setSubmitInProgress(true);\n    let idTokenResult = await user.getIdTokenResult();\n    let token = idTokenResult.token;\n    try {\n      const result = await axios.post(\n        \"admin/write-config\",\n        {\n          width: resizedWidthRef.current.value,\n          height: resizedHeightRef.current.value,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      if (result.status === 200) {\n        onSettingsChange(true);\n      } else {\n        onSettingsChange(false);\n      }\n    } catch (e) {\n      console.log(e.message);\n      onSettingsChange(false);\n    }\n    setSubmitInProgress(false);\n    return;\n  };\n\n  return (\n    <div className=\"card mt-2\">\n      <form className=\"card-body\" autoComplete=\"off\" onSubmit={onFormSubmit}>\n        <div className=\"form-row\">\n          <div className=\"form-group col-md-6 text-left\">\n            <label\n              for=\"resized-width\"\n              className=\"text-secondary col-form-label-sm\"\n            >\n              Width After Resize\n            </label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"resized-width\"\n              placeholder=\"Width (Pixels)\"\n              ref={resizedWidthRef}\n              autoComplete=\"off\"\n            />\n          </div>\n          <div className=\"form-group col-md-6 text-left\">\n            <label\n              for=\"resized-height\"\n              className=\"text-secondary col-form-label-sm\"\n            >\n              Height After Resize\n            </label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"resized-height\"\n              placeholder=\"Height (Pixels)\"\n              ref={resizedHeightRef}\n              autoComplete=\"off\"\n            />\n          </div>\n        </div>\n        <div className=\"form-row my-2\">\n          <label className=\"text-secondary col-form-label-sm\">\n            Delete Original Files ?\n          </label>\n          <select class=\"form-control\" id=\"action-on-resize\">\n            <option>Delete on successful resize</option>\n            <option>Yes</option>\n            <option>No</option>\n          </select>\n        </div>\n\n        <div className=\"form-row my-2\">\n          <label className=\"text-secondary col-form-label-sm\">\n            Cloud Storage Path Of Original Files\n          </label>\n          <input\n            type=\"text\"\n            id=\"disabledTextInput\"\n            className=\"form-control w-full\"\n            placeholder=\"e.g. /images\"\n          />\n        </div>\n\n        <div className=\"form-row my-2\">\n          <label className=\"text-secondary col-form-label-sm\">\n            Cloud Storage Paths To Exclude\n          </label>\n          <input\n            type=\"text\"\n            id=\"disabledTextInput\"\n            className=\"form-control\"\n            placeholder=\"e.g. /images/high-res\"\n          />\n        </div>\n\n        <div className=\"form-row my-2\">\n          <label className=\"text-secondary col-form-label-sm\">\n            Cloud Storage Path For Resized Images\n          </label>\n          <input\n            type=\"text\"\n            id=\"disabledTextInput\"\n            className=\"form-control\"\n            placeholder=\"e.g. thumbnails\"\n          />\n        </div>\n\n        <div className=\"form-row my-2\">\n          <label className=\"text-secondary col-form-label-sm\">\n            Cache-Control Header\n          </label>\n          <input\n            type=\"text\"\n            id=\"disabledTextInput\"\n            className=\"form-control\"\n            placeholder=\"e.g. max-age=86400\"\n          />\n        </div>\n        <div className=\"form-row my-2\">\n          <label className=\"text-secondary col-form-label-sm\">\n            Resized Image File Name Pattern:\n          </label>\n          <input\n            type=\"text\"\n            id=\"disabledTextInput\"\n            className=\"form-control\"\n            placeholder=\"e.g. &#36;&#123;original_name&#125;_&#36;&#123;width&#125;x&#36;&#123;heigth&#125;\"\n          />\n        </div>\n        <div className=\"form-row my-2\">\n          <label className=\"text-secondary col-form-label-sm pt-3 mr-2\">\n            Result Formats:\n          </label>\n          <div class=\"form-check form-check-inline\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              id=\"inlineCheckbox1\"\n              value=\"option1\"\n            />\n            <label\n              class=\"text-secondary col-form-label-sm form-check-label\"\n              for=\"inlineCheckbox1\"\n            >\n              original\n            </label>\n          </div>\n          <div class=\"form-check form-check-inline\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              id=\"inlineCheckbox2\"\n              value=\"option2\"\n            />\n            <label\n              class=\"text-secondary col-form-label-sm form-check-label\"\n              for=\"inlineCheckbox2\"\n            >\n              jepg\n            </label>\n          </div>\n          <div class=\"form-check form-check-inline\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              id=\"inlineCheckbox3\"\n              value=\"option3\"\n            />\n            <label\n              class=\"text-secondary col-form-label-sm form-check-label\"\n              for=\"inlineCheckbox3\"\n            >\n              png\n            </label>\n          </div>\n          <div class=\"form-check form-check-inline\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              id=\"inlineCheckbox3\"\n              value=\"option3\"\n            />\n            <label\n              class=\"text-secondary col-form-label-sm form-check-label\"\n              for=\"inlineCheckbox3\"\n            >\n              tiff\n            </label>\n          </div>\n          <div class=\"form-check form-check-inline\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              id=\"inlineCheckbox3\"\n              value=\"option3\"\n            />\n            <label\n              class=\"text-secondary col-form-label-sm form-check-label\"\n              for=\"inlineCheckbox3\"\n            >\n              webp\n            </label>\n          </div>\n        </div>\n        {submitInProgress ? (\n          <button class=\"btn btn-primary\" type=\"button\" disabled>\n            <span\n              className=\"spinner-border spinner-border-sm mr-2\"\n              role=\"status\"\n              aria-hidden=\"true\"\n            ></span>\n            Loading...\n          </button>\n        ) : (\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Update\n          </button>\n        )}\n      </form>\n    </div>\n  );\n}\n\nexport default ConfigForm;\n","/// The settings for this extension.\nfunction ExtensionSettings() {\n  // Set the default values as needed.\n  return {\n    width: 200,\n    height: 200,\n  };\n}\n\nexport default ExtensionSettings;\n","import React from \"react\";\nimport { Line } from \"react-chartjs-2\";\n\nfunction Stats() {\n  const mockData = {\n    labels: [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ],\n    datasets: [\n      {\n        label: \"Original Size (Cumulative) (GB)\",\n        backgroundColor: \"rgb(255, 99, 132)\",\n        borderColor: \"rgba(255, 99, 132, 0.5)\",\n        lineTension: 0.2,\n        data: [100, 110, 130, 160, 200, 250, 350, 500, 750, 1000, 1250, 1800],\n      },\n      {\n        label: \"Resized Images (Cumulative) (GB)\",\n        backgroundColor: \"rgb(54, 162, 235)\",\n        borderColor: \"rgba(54, 162, 235, 0.5)\",\n        lineTension: 0.2,\n        data: [30, 35, 40, 50, 70, 90, 120, 166, 250, 333, 416, 666],\n      },\n    ],\n  };\n\n  return (\n    <div className=\"flex mx-60 my-2 px-4 py-2 bg-white shadow-md sm:rounded-md\">\n      <div className=\"w-2/3\">\n        <p className=\"mb-2 text-xl text-gray-500\">Storage Savings</p>\n        <div className=\"h-80 w-full\">\n          <Line\n            data={mockData}\n            options={{\n              maintainAspectRatio: false,\n              title: {\n                display: true,\n                text: \"Average Rainfall per month\",\n                fontSize: 20,\n              },\n              legend: {\n                display: true,\n                position: \"right\",\n              },\n            }}\n          />\n        </div>\n        <p className=\"mt-4 text-justify text-gray-400 text-xs italic\">\n          * Based on mock data (Real data can be read from Firestore / Firebase\n          Storage)\n        </p>\n      </div>\n      <div className=\"w-1/3 pt-12\">\n        <p className=\"text-6xl text-yellow-500 font-semibold tracking-wider\">\n          240,323\n        </p>\n        <p className=\"pt-3 text-3xl text-gray-400 tracking-wider select-none\">\n          Images Processed\n        </p>\n        <p className=\"text-6xl text-green-400 font-semibold pt-20 tracking-wider\">\n          1,134\n        </p>\n        <p className=\"pt-3 text-3xl text-gray-400 tracking-wider select-none\">\n          Storage Saved (GB)\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default Stats;\n","import React, { useState } from \"react\";\nimport firebase from \"firebase/app\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport SignOutButton from \"./SignOutButton\";\nimport ConfigForm from \"./ConfigForm\";\nimport axios from \"axios\";\nimport ExtensionSettings from \"./ExtensionSettings\";\nimport Stats from \"./Stats\";\n\nfunction AdminApp() {\n  const auth = firebase.auth();\n  const [user] = useAuthState(auth);\n  const [settings, setSettings] = useState(null);\n\n  const getCurrentConfigs = async () => {\n    let idTokenResult = await user.getIdTokenResult();\n    let token = idTokenResult.token;\n    try {\n      const result = await axios.get(\"admin/read-config\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      console.log(result.status);\n      console.log(result.data);\n      if (result.status === 200) {\n        setSettings(result.data);\n      } else {\n        setSettings(ExtensionSettings());\n      }\n      return;\n    } catch (e) {\n      console.log(e.message);\n      return false;\n    }\n  };\n\n  const onSettingsChange = async (success) => {\n    if (success) {\n      setSettings(null);\n    } else {\n      alert(\"Update was not successful. Please try again later.\");\n    }\n  };\n\n  if (!settings) {\n    getCurrentConfigs();\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"w-full top-0 bg-blue-400 h-20 flex place-content-between shadow-md\">\n        <div className=\"flex pl-5 justify-center place-self-center\">\n          <img\n            className=\"h-14 inline\"\n            src=\"https://www.gstatic.com/mobilesdk/200707_mobilesdk/resize_images_52@2x.png\"\n            alt=\"logo\"\n          />\n          <h1 className=\"inline text-gray-100 align-text-bottom text-4xl pl-3 self-center\">\n            Image Resizer Extension Dashboard\n          </h1>\n        </div>\n        <SignOutButton />\n      </header>\n      <Stats />\n      <div className=\"flex mx-60 my-2 px-4 py-2 bg-white shadow-md sm:rounded-md\">\n        <div className=\"w-1/2\">\n          <div className=\"my-3 text-xl text-gray-500 text-left\">\n            Current Settings\n          </div>\n\n          {settings ? (\n            <div>\n              <p className=\"text-left text-gray-600 my-2\">\n                Resized Dimensions (Width x Height):\n                <span className=\"font-mono ml-2\">\n                  {settings.width} x {settings.height}\n                </span>\n              </p>\n              <p className=\"text-left text-gray-600 my-2\">\n                Delete Original Files:\n                <span className=\"font-mono ml-2\">\n                  Delete on successful resize\n                </span>\n              </p>\n              <p className=\"text-left text-gray-600 my-2\">\n                Cloud Storage Path For Resized Images:\n                <span className=\"font-mono ml-2\">/thumbnails</span>\n              </p>\n              <p className=\"text-left text-gray-600 my-2\">\n                Path of Original Images:\n                <span className=\"font-mono ml-2\">/images</span>\n              </p>\n              <p className=\"text-left text-gray-600 my-2\">\n                Exclude Paths:\n                <span className=\"font-mono ml-2\">None</span>\n              </p>\n              <p className=\"text-left text-gray-600 my-2\">\n                Cache-Control Header:\n                <span className=\"font-mono ml-2\">max-age=86400</span>\n              </p>\n              <p className=\"text-left text-gray-600 my-2\">\n                Resized File Names:\n                <span className=\"font-mono ml-2\">\n                  &#36;&#123;original_name&#125;_&#36;&#123;width&#125;x&#36;&#123;heigth&#125;\n                </span>\n              </p>\n              <p className=\"text-left text-gray-600 my-2\">\n                Convert to following types:\n                <span className=\"font-mono ml-2\">jpeg, png</span>\n              </p>\n            </div>\n          ) : (\n            <div class=\"spinner-border text-warning\" role=\"status\">\n              <span class=\"sr-only\">Loading...</span>\n            </div>\n          )}\n        </div>\n        <div className=\"w-1/2 my-3 text-xl text-gray-500 text-left\">\n          <p>Modify Settings</p>\n\n          <ConfigForm onSettingsChange={onSettingsChange} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AdminApp;\n\n// <header className=\"\">\n//   {/* <p>Hi, {user.displayName}</p> */}\n//   <p>Hi, Ehsan N!</p>\n//   <p>This is the Admin WebApp. You have superpowers!🔥 🚀</p>\n//   <div className=\"\">{/* <SignOutButton /> */}</div>\n//   <div>\n//     <p>Current Extension Settings:</p>\n//     {settings ? (\n//       <div>\n//         Width = {settings.width}, Height = {settings.height}\n//       </div>\n//     ) : (\n//       <div class=\"spinner-border text-warning\" role=\"status\">\n//         <span class=\"sr-only\">Loading...</span>\n//       </div>\n//     )}\n//   </div>\n//   <ConfigForm onSettingsChange={onSettingsChange} />\n// </header>\n","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport firebase from \"firebase/app\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useState } from \"react\";\nimport SignIn from \"./components/SignIn\";\nimport AdminApp from \"./components/AdminApp\";\n\nvar UserStatus = {\n  kUnauthenticated: 0,\n  kAuthenticatedButNotAdmin: 1,\n  kAuthenticatedAdmin: 2,\n};\n\nasync function isUserAnAdmin(user) {\n  let idTokenResult = await user.getIdTokenResult();\n  let token = idTokenResult.token;\n  try {\n    const result = await axios.get(\"admin/work\", {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    if (result.status === 200) {\n      // The server has confirmed that this user is an Admin User.\n      return true;\n    }\n  } catch (e) {\n    console.log(e.message);\n    return false;\n  }\n  return false;\n}\n\nfunction App() {\n  const [userStatus, setUserStatus] = useState(UserStatus.kUnauthenticated);\n\n  if (!firebase.apps.length) {\n    var elem = document.getElementById(\"firebase-app\");\n    var apiKey = elem.getAttribute(\"api-key\");\n    var projectId = elem.getAttribute(\"project-id\");\n    firebase.initializeApp({\n      apiKey: apiKey,\n      authDomain: projectId + \".firebaseapp.com\",\n      projectId: projectId,\n    });\n  }\n\n  // Note: using `useAuthState` is only allowed after\n  // `firebase.initializeApp()` has been performed.\n  const auth = firebase.auth();\n  const [user] = useAuthState(auth);\n  if (user) {\n    isUserAnAdmin(user).then((admin) => {\n      if (admin) {\n        setUserStatus(UserStatus.kAuthenticatedAdmin);\n      } else {\n        setUserStatus(UserStatus.kAuthenticatedButNotAdmin);\n        auth.signOut();\n      }\n    });\n  }\n\n  if (user && userStatus === UserStatus.kAuthenticatedAdmin) {\n    // This is the homepage for authenticated administrators.\n    return <AdminApp />;\n  }\n\n  if (userStatus === UserStatus.kAuthenticatedButNotAdmin) {\n    // This is the homepage for those who are authenticated, but the server\n    // has determined that they are not administrators.\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>You are not authorized to access this content.</p>\n          <div className=\"mt-3\">\n            <SignIn />\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  // This is the homepage for those who are not not authenticated yet.\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>Welcome to the Image Resizer Extension Dashboard!</p>\n        <p>Please sign in to continue</p>\n        <div className=\"mt-3\">\n          <SignIn />\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./tailwind.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}